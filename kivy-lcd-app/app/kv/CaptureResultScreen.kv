#:kivy 2.0.0

<CaptureResultScreen>:
    canvas.before:
        Rectangle:
            source: "app/assets/placeholder_bg1.png"
            pos: self.pos
            size: self.size

    # === RESULT BUTTON ===
    RoundedButton:
        id: result_button
        size_hint: None, None
        size: 60, 60
        pos_hint: {"center_x": 0.20, "y": 0.07}
        on_release: app.last_screen = 'capture_result'; app.root.current = 'result'

        canvas.before:
            Color:
                rgba: self.shadow_color
            RoundedRectangle:
                pos: self.x + self.shadow_offset_x, self.y - self.shadow_offset_y
                size: self.size
                radius: [18, 18, 18, 18]
            Color:
                rgba: 1, 1, 1, 1
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [18, 18, 18, 18]

        RelativeLayout:
            size: result_button.size
            pos: result_button.pos
            BoxLayout:
                orientation: "vertical"
                size_hint: 1, 1
                spacing: 2
                padding: [0, 10, 0, 6]
                Image:
                    source: "app/assets/result.png"
                    allow_stretch: True
                    keep_ratio: True
                    size_hint_y: 0.65
                    pos_hint: {"center_x": 0.5}
                Label:
                    text: "Result"
                    color: 0/255., 114/255., 0/255., 1
                    font_size: 13
                    bold: True
                    size_hint_y: 0.35
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

    # === RETAKE BUTTON ===
    GradientScanButton:
        id: retake_button
        size_hint: None, None
        size: 100, 100
        pos_hint: {"center_x": 0.5, "y": 0.04}
        on_release: app.root.current = 'scan'

        canvas.before:
            Color:
                rgba: self.shadow_color
            RoundedRectangle:
                pos: self.x + self.shadow_offset_x, self.y - self.shadow_offset_y
                size: self.size
                radius: [25, 25, 25, 25]
            Color:
                rgba: 1, 1, 1, 1
            RoundedRectangle:
                texture: self.gradient_texture
                pos: self.pos
                size: self.size
                radius: [25, 25, 25, 25]

        RelativeLayout:
            size: retake_button.size
            pos: retake_button.pos
            BoxLayout:
                orientation: "vertical"
                size_hint: 1, 1
                spacing: 3
                padding: [0, 15, 0, 8]
                Image:
                    source: "app/assets/scan2.png"
                    allow_stretch: True
                    keep_ratio: True
                    size_hint_y: 0.65
                    pos_hint: {"center_x": 0.5}
                Label:
                    text: "Retake"
                    color: 1, 1, 1, 1
                    font_size: 16
                    bold: True
                    size_hint_y: 0.35
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

    # === SAVE BUTTON ===
    RoundedButton:
        id: save_button
        size_hint: None, None
        size: 60, 60
        pos_hint: {"center_x": 0.80, "y": 0.07}
        on_release: app.root.current = 'save'

        canvas.before:
            Color:
                rgba: self.shadow_color
            RoundedRectangle:
                pos: self.x + self.shadow_offset_x, self.y - self.shadow_offset_y
                size: self.size
                radius: [18, 18, 18, 18]
            Color:
                rgba: 1, 1, 1, 1
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [18, 18, 18, 18]

        RelativeLayout:
            size: save_button.size
            pos: save_button.pos
            BoxLayout:
                orientation: "vertical"
                size_hint: 1, 1
                spacing: 2
                padding: [0, 10, 0, 6]
                Image:
                    source: "app/assets/save.png"
                    allow_stretch: True
                    keep_ratio: True
                    size_hint_y: 0.65
                    pos_hint: {"center_x": 0.5}
                Label:
                    text: "Save"
                    color: 0/255., 114/255., 0/255., 1
                    font_size: 13
                    bold: True
                    size_hint_y: 0.35
                    halign: "center"
                    valign: "middle"
                    text_size: self.size
