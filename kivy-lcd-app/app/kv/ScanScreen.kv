#:kivy 2.0.0

<ScanScreen>:
    canvas.before:
        Rectangle:
            source: "app/assets/placeholder_bg1.png"
            pos: self.pos
            size: self.size

    # === CANCEL BUTTON ===
    RoundedButton:
        id: cancel_button
        size_hint: None, None
        size: 60, 60
        pos_hint: {"center_x": 0.20, "y": 0.07}
        on_release: app.root.current = 'home'

        canvas.before:
            Color:
                rgba: self.shadow_color
            RoundedRectangle:
                pos: self.x + self.shadow_offset_x, self.y - self.shadow_offset_y
                size: self.size
                radius: [18, 18, 18, 18]
            Color:
                rgba: 1, 1, 1, 1
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [18, 18, 18, 18]

        RelativeLayout:
            size: cancel_button.size
            pos: cancel_button.pos
            BoxLayout:
                orientation: "vertical"
                size_hint: 1, 1
                spacing: 2
                padding: [0, 10, 0, 6]
                Image:
                    source: "app/assets/cancel.png"
                    allow_stretch: True
                    keep_ratio: True
                    size_hint_y: 0.65
                    pos_hint: {"center_x": 0.5}
                Label:
                    text: "Cancel"
                    color: 0/255., 114/255., 0/255., 1
                    font_size: 13
                    bold: True
                    size_hint_y: 0.35
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

    # === SCAN BUTTON ===
    GradientScanButton:
        id: scan_button
        size_hint: None, None
        size: 100, 100
        pos_hint: {"center_x": 0.50, "y": 0.04}
        on_release: app.root.current = 'scanning'

        canvas.before:
            Color:
                rgba: self.shadow_color
            RoundedRectangle:
                pos: self.x + self.shadow_offset_x, self.y - self.shadow_offset_y
                size: self.size
                radius: [25, 25, 25, 25]
            Color:
                rgba: 1, 1, 1, 1
            RoundedRectangle:
                texture: self.gradient_texture
                pos: self.pos
                size: self.size
                radius: [25, 25, 25, 25]

        RelativeLayout:
            size: scan_button.size
            pos: scan_button.pos
            BoxLayout:
                orientation: "vertical"
                size_hint: 1, 1
                spacing: 3
                padding: [0, 15, 0, 8]
                Image:
                    source: "app/assets/scan2.png"
                    allow_stretch: True
                    keep_ratio: True
                    size_hint_y: 0.65
                    pos_hint: {"center_x": 0.5}
                Label:
                    text: "Scan"
                    color: 1, 1, 1, 1
                    font_size: 16
                    bold: True
                    size_hint_y: 0.35
                    halign: "center"
                    valign: "middle"
                    text_size: self.size

    # === GUIDE BUTTON ===
    RoundedButton:
        id: guide_button
        size_hint: None, None
        size: 60, 60
        pos_hint: {"center_x": 0.80, "y": 0.07}
        on_release: app.root.current = 'guide'

        canvas.before:
            Color:
                rgba: self.shadow_color
            RoundedRectangle:
                pos: self.x + self.shadow_offset_x, self.y - self.shadow_offset_y
                size: self.size
                radius: [18, 18, 18, 18]
            Color:
                rgba: 1, 1, 1, 1
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [18, 18, 18, 18]

        RelativeLayout:
            size: guide_button.size
            pos: guide_button.pos
            BoxLayout:
                orientation: "vertical"
                size_hint: 1, 1
                spacing: 2
                padding: [0, 10, 0, 6]
                Image:
                    source: "app/assets/guide.png"
                    allow_stretch: True
                    keep_ratio: True
                    size_hint_y: 0.65
                    pos_hint: {"center_x": 0.5}
                Label:
                    text: "Guide"
                    color: 0/255., 114/255., 0/255., 1
                    font_size: 13
                    bold: True
                    size_hint_y: 0.35
                    halign: "center"
                    valign: "middle"
                    text_size: self.size
