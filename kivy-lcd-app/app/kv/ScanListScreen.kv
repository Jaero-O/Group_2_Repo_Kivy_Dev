<ScanListScreen>:
    name: 'scan_list'
    
    BoxLayout:
        orientation: 'vertical'
        padding: dp(10)
        spacing: dp(10)
        
        # Header
        BoxLayout:
            size_hint_y: 0.12
            spacing: dp(10)
            
            Button:
                text: '‚Üê Back'
                size_hint_x: 0.2
                on_press: root.go_back()
                background_color: 0.3, 0.3, 0.3, 1.0
            
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.8
                
                Label:
                    text: root.tree_name
                    font_size: sp(20)
                    bold: True
                    halign: 'center'
                    size_hint_y: 0.6
                
                Label:
                    text: f'{root.scan_count} scan(s)'
                    font_size: sp(14)
                    halign: 'center'
                    color: 0.7, 0.7, 0.7, 1.0
                    size_hint_y: 0.4
        
        # Filter section
        BoxLayout:
            size_hint_y: 0.08
            spacing: dp(5)
            padding: [dp(5), 0, dp(5), 0]
            
            Button:
                id: disease_filter_btn
                text: root.selected_disease
                size_hint_x: 0.32
                background_color: 0.25, 0.25, 0.3, 1.0
                on_press: root.show_disease_filter()
            
            Button:
                id: date_filter_btn
                text: root.selected_date_range
                size_hint_x: 0.38
                background_color: 0.25, 0.25, 0.3, 1.0
                on_press: root.show_date_filter()
            
            Button:
                text: 'üìÖ'
                size_hint_x: 0.12
                background_color: 0.3, 0.5, 0.7, 1.0
                on_press: root.show_custom_date_picker()
            
            Button:
                id: sort_button
                text: 'Sort: Newest'
                size_hint_x: 0.18
                background_color: 0.3, 0.4, 0.5, 1.0
                on_press: root.toggle_sort_order()
        
        # Scans list (scrollable)
        ScrollView:
            do_scroll_x: False
            size_hint_y: 0.7
            
            BoxLayout:
                id: scans_container
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: dp(5)
                spacing: dp(10)
        
        # New scan button
        Button:
            text: '+ New Scan'
            size_hint_y: 0.1
            background_color: 0.2, 0.6, 0.3, 1.0
            on_press: root.start_new_scan()
